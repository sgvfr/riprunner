{"version":3,"sources":["webpack:///./src/app/menu-callout-history/menu-callout-history.component.html","webpack:///./src/app/menu-callout-history/menu-callout-history.component.ts","webpack:///./src/app/menu-callout-history/menu-callout-history.module.ts","webpack:///./src/app/menu-callout-history/menu-callout-history.service.ts"],"names":[],"mappings":"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","file":"menu-callout-history-menu-callout-history-module-ngfactory.js","sourcesContent":["    <head>\n        <meta charset=\"UTF-8\">\n        <title>Secure Login: Protected Page</title>\n    </head>\n\n    <div class=\"container_center\">\n\t\t\t<div *ngxPermissionsOnly=\"['USER-AUTHENTICATED']\">\n\t<!--    \n\t\t\t\t\t{% if gvm.auth.isAuth %}\n\t\t\t\t\t\t\t{% include 'user-welcome.twig.html' %}\n\t\t\t\t\t\t\t{% include 'live-callout-warning.twig.html' %}\n\t-->\n\t\t\t\t\t<div class=\"menudiv_wrapper\">\n\t\t\t\t\t\t<nav class=\"vertical\">\n\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<label for=\"main_page\">Return to ..</label>\n\t\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"verticalMenu\" id=\"main_page\" />\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t<li><a [routerLink]=\"['/main-menu']\">Main Menu</a></li>\n\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t\t<li>\n\t\t\t\t\t\t\t\t\t<label for=\"logout\">Exit</label>\n\t\t\t\t\t\t\t\t\t<input type=\"radio\" name=\"verticalMenu\" id=\"logout\" />\n\t\t\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t\t\t<ul>\n\t\t\t\t\t\t\t\t\t\t\t<li><a [routerLink]=\"['/login']\">Logout</a></li>\n\t\t\t\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t\t</ul>\n\t\t\t\t\t\t</nav>\n\t\t\t\t\t</div>\n\t\t\t\t\t\n\t\t\t\t\t<button mat-icon-button (click)=\"reloadData()\">\n\t\t\t\t\t\t\t<mat-icon>refresh</mat-icon>\n\t\t\t\t\t</button>\n\n\t\t\t<div *ngIf=\"errorMessage\" [ngClass]=\"'error'\">The following error was detected: {{errorMessage}}</div>\n\t\t\t\n\t\t\t<div class=\"table-container mat-elevation-z8\">\n\t\t\t\t<div class=\"loading-shade\" *ngIf=\"(isLoadingResults | async)\">\n\t\t\t\t\t<mat-spinner *ngIf=\"(isLoadingResults | async)\"></mat-spinner>\n\t\t\t\t</div>\n\t\t\t\n\t\t\t\t<mat-table #table [dataSource]=\"dataSource\" matSort matSortDirection=\"asc\">\n\t\t\t\n\t\t\t\t\t<ng-container matColumnDef=\"id\">\n\t\t\t\t\t\t<mat-header-cell *matHeaderCellDef mat-sort-header>#</mat-header-cell>\n\t\t\t\t\t\t<mat-cell *matCellDef=\"let row\">{{ row.id }}</mat-cell>\n\t\t\t\t\t</ng-container>\n\t\t\t\n\t\t\t\t\t<ng-container matColumnDef=\"calltime\">\n\t\t\t\t\t\t<mat-header-cell *matHeaderCellDef mat-sort-header>Start Time</mat-header-cell>\n\t\t\t\t\t\t<mat-cell *matCellDef=\"let row\">{{ row.calltime }}</mat-cell>\n\t\t\t\t\t</ng-container>\n\t\t\t\n\t\t\t\t\t<ng-container matColumnDef=\"calltype\">\n\t\t\t\t\t\t<mat-header-cell *matHeaderCellDef mat-sort-header>Call Type</mat-header-cell>\n\t\t\t\t\t\t<mat-cell *matCellDef=\"let row\" title=\"{{ row.callout_type_desc }}\">{{ row.callout_type_desc }}</mat-cell>\n\t\t\t\t\t</ng-container>\n\t\t\t\n\t\t\t\t\t<ng-container matColumnDef=\"address\">\n\t\t\t\t\t\t<mat-header-cell *matHeaderCellDef mat-sort-header>Addres</mat-header-cell>\n\t\t\t\t\t\t<mat-cell *matCellDef=\"let row\">\n\t\t\t\t\t\t<a target=\"_blank\" href=\"https://maps.google.com/maps?saddr={{ row.callout_address_origin }}&daddr={{ row.callout_address_dest }} ({{ row.address }})&dirflg=d\">\n\t\t\t\t\t\t{{ row.address }}\n\t\t\t\t\t\t</a>\n\t\t\t\t\t\t</mat-cell>\n\t\t\t\t\t</ng-container>\n\t\t\t\n\t\t\t\t\t<ng-container matColumnDef=\"latitude\">\n\t\t\t\t\t\t<mat-header-cell *matHeaderCellDef mat-sort-header>Geo Latitude</mat-header-cell>\n\t\t\t\t\t\t<mat-cell *matCellDef=\"let row\">{{ row.latitude }}</mat-cell>\n\t\t\t\t\t</ng-container>\n\t\t\t\n\t\t\t\t\t<ng-container matColumnDef=\"longitude\">\n\t\t\t\t\t\t<mat-header-cell *matHeaderCellDef mat-sort-header>Geo Longitude</mat-header-cell>\n\t\t\t\t\t\t<mat-cell *matCellDef=\"let row\">{{ row.longitude }}</mat-cell>\n\t\t\t\t\t</ng-container>\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t<ng-container matColumnDef=\"units\">\n\t\t\t\t\t\t<mat-header-cell *matHeaderCellDef mat-sort-header>Responding Units</mat-header-cell>\n\t\t\t\t\t\t<mat-cell *matCellDef=\"let row\">{{ row.units }}</mat-cell>\n\t\t\t\t\t</ng-container>\n\t\t\t\n\t\t\t\t\t<ng-container matColumnDef=\"status\">\n\t\t\t\t\t\t<mat-header-cell *matHeaderCellDef mat-sort-header>Call Status</mat-header-cell>\n\t\t\t\t\t\t<mat-cell *matCellDef=\"let row\">{{ row.callout_status_desc }}</mat-cell>\n\t\t\t\t\t</ng-container>\n\t\t\t\n\t\t\t\t\t<ng-container matColumnDef=\"updatetime\">\n\t\t\t\t\t\t<mat-header-cell *matHeaderCellDef mat-sort-header>Last Update Time</mat-header-cell>\n\t\t\t\t\t\t<mat-cell *matCellDef=\"let row\">{{ row.updatetime }}</mat-cell>\n\t\t\t\t\t</ng-container>\n\t\t\t\n\t\t\t\t\t<ng-container matColumnDef=\"call_key\">\n\t\t\t\t\t\t<mat-header-cell *matHeaderCellDef mat-sort-header>Callout Key</mat-header-cell>\n\t\t\t\t\t\t<mat-cell *matCellDef=\"let row\">{{ row.call_key }}</mat-cell>\n\t\t\t\t\t</ng-container>\n\t\t\t\n\t\t\t\t\t<ng-container matColumnDef=\"responders\">\n\t\t\t\t\t\t<mat-header-cell *matHeaderCellDef mat-sort-header>Responders</mat-header-cell>\n\t\t\t\t\t\t<mat-cell *matCellDef=\"let row\">\n\t\t\t\t\t\t\t<a target=\"_blank\" href=\"{{ getExternalUrl('controllers/callout-history-response-controller.php?cid='+row.id) }}\">{{ row.responders }}</a>\n\t\t\t\t\t\t</mat-cell>\n\t\t\t\t\t</ng-container>\n\t\t\t\n\t\t\t\t\t<ng-container matColumnDef=\"hours_spent\">\n\t\t\t\t\t\t<mat-header-cell *matHeaderCellDef mat-sort-header>Duration (hours)</mat-header-cell>\n\t\t\t\t\t\t<mat-cell *matCellDef=\"let row\">{{ row.hours_spent }}</mat-cell>\n\t\t\t\t\t</ng-container>\n\t\t\t\n\t\t\t\t\t<ng-container matColumnDef=\"call_details\">\n\t\t\t\t\t\t<mat-header-cell *matHeaderCellDef mat-sort-header>Call Details</mat-header-cell>\n\t\t\t\t\t\t<mat-cell *matCellDef=\"let row\">\n\t\t\t\t\t\t\t<br><a target=\"_blank\" href=\"{{ getExternalUrl('ngui/index.html?page=call-details&cid='+row.id+'&fhid='+getFirehallId()+'&ckid='+row.call_key, false) }}\">details</a>\n\t\t\t\t\t\t</mat-cell>\n\t\t\t\t\t</ng-container>\n\t\t\t\n\t\t\t\t\t<ng-container matColumnDef=\"override_address\">\n\t\t\t\t\t\t<mat-header-cell *matHeaderCellDef mat-sort-header>Override Address</mat-header-cell>\n\t\t\t\t\t\t<mat-cell *matCellDef=\"let row\">\n\t\t\t\t\t\t\t<a target=\"_blank\" href=\"{{ getExternalUrl('controllers/address-override-controller.php?cid='+row.id) }}\">override</a>\n\t\t\t\t\t\t</mat-cell>\n\t\t\t\t\t</ng-container>\n\t\t\t\t\t\n\t\t\t\t\t<mat-header-row *matHeaderRowDef=\"displayedColumns\"></mat-header-row>\n\t\t\t\t\t<mat-row *matRowDef=\"let row; columns: displayedColumns;\"></mat-row>        \n\t\t\t\t</mat-table>\n\t\t\t\n\t\t\t\t<mat-paginator #paginator [length]=\"resultsLength\" [pageSize]=\"30\">\n\t\t\t\t</mat-paginator>\n\t\t\t</div>\n\t\t</div>\n   </div>","import {Component, AfterViewInit, ViewChild} from '@angular/core';\nimport {MatPaginator, MatSort, MatTableDataSource} from '@angular/material';\nimport {Observable, merge, of } from 'rxjs';\nimport {catchError, map, startWith, switchMap} from 'rxjs/operators';\nimport {Location} from '@angular/common';\nimport {Router} from '@angular/router';\n\nimport {AuthService} from '@app/auth';\nimport {MenuCalloutHistoryService, CalloutHistoryItem} from './menu-callout-history.service';\n\n@Component({\n  selector: 'app-menu-callout-history',\n  templateUrl: './menu-callout-history.component.html',\n  styleUrls: ['./menu-callout-history.component.css']\n})\nexport class MenuCalloutHistoryComponent implements AfterViewInit {\n\n  errorMessage: string;\n\n  displayedColumns: Array<string>;\n  dataSource = new MatTableDataSource();\n\n  resultsLength = 0;\n  isLoadingResults: Observable<boolean> = of(false);\n\n  @ViewChild(MatPaginator,{static:false}) paginator: MatPaginator;\n  @ViewChild(MatSort,{static:false}) sort: MatSort;\n\n  constructor(private location: Location, private authService: AuthService,\n              private calloutHistoryService: MenuCalloutHistoryService,\n              private router: Router) {\n    // debugger;\n    if (this.authService.hasPermission('ROLE-admin')) {\n      this.displayedColumns = ['id', 'calltime', 'calltype', 'address', 'latitude', 'longitude',\n                        'units', 'status', 'updatetime', 'call_key', 'responders', 'hours_spent',\n                        'call_details', 'override_address'\n                      ];\n    } else {\n      this.displayedColumns = ['id', 'calltime', 'calltype', 'address', 'latitude', 'longitude',\n                        'units', 'status', 'updatetime', 'call_key', 'responders', 'hours_spent',\n                        'call_details'\n                      ];\n    }\n  }\n\n  ngAfterViewInit() {\n    // debugger;\n    if (this.sort === undefined) {\n      setTimeout(() => { this.ngAfterViewInit(); }, 25);\n      return;\n    }\n    // If the user changes the sort order, reset back to the first page.\n    this.sort.sortChange.subscribe(() => this.paginator.pageIndex = 0);\n\n    merge(this.sort.sortChange, this.paginator.page)\n      .pipe(\n        startWith({}),\n        switchMap(() => {\n          Promise.resolve(null).then(() => this.isLoadingResults = of(true));\n          return this.calloutHistoryService.getCalloutHistory(\n            this.sort.active, this.sort.direction, this.paginator.pageIndex);\n        }),\n        map(data => {\n          // Flip flag to show that loading has finished.\n          Promise.resolve(null).then(() =>\n            this.isLoadingResults = of(false)\n          );\n          this.resultsLength = data.length;\n          return data;\n        }),\n        catchError((err) => {\n          debugger;\n\n          this.errorMessage = err.error.text;\n          console.log('Error getting grid data: ' + err.error.text);\n\n          Promise.resolve(null).then(() =>\n            this.isLoadingResults = of(false)\n          );\n          return of([]);\n        })\n      ).subscribe(data => {\n        this.dataSource.data = data;\n        this.dataSource.sort = this.sort;\n        this.dataSource.paginator = this.paginator;\n        }\n      );\n  }\n\n  reloadData() {\n    this.ngAfterViewInit();\n  }\n  getFirehallId(): string {\n    return this.authService.getFirehallId();\n  }\n  getExternalUrl(url: string, handOffJWT: boolean = true): string {\n    // debugger;\n    url = this.getRootPath() + url;\n    return this.authService.injectJWTtoken(url, handOffJWT);\n  }\n  private getRootPath(): string {\n    return this.location.prepareExternalUrl('../');\n  }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { RouterModule, Routes } from '@angular/router';\nimport { NgxPermissionsModule, NgxPermissionsGuard } from 'ngx-permissions';\n\nimport { MenuCalloutHistoryComponent } from './menu-callout-history.component';\nimport { MenuCalloutHistoryService } from './menu-callout-history.service';\nimport { SystemSharedModule } from '@app/common';\n\nconst menuRoutes: Routes = [\n  { path: '', component: MenuCalloutHistoryComponent,\n    canActivate: [NgxPermissionsGuard],\n      data: {\n        permissions: {\n          only: 'USER-AUTHENTICATED',\n          redirectTo: '/login'\n        }\n      }\n  },\n];\n\n@NgModule({\n  imports: [\n    CommonModule,\n    NgxPermissionsModule.forChild(),\n    RouterModule.forChild(menuRoutes),\n    SystemSharedModule,\n  ],\n  providers: [\n    MenuCalloutHistoryService\n  ],\n  declarations: [\n    MenuCalloutHistoryComponent,\n  ]\n})\n\nexport class MenuCalloutHistoryModule { }\n","import { Injectable } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\nimport { Location } from '@angular/common';\nimport { Observable } from 'rxjs';\n\nimport { AuthService } from '@app/auth';\n\nexport interface CalloutHistoryItem {\n  id: number;\n  calltime: string;\n  calltype: string;\n  address: string;\n  latitude: number;\n  longitude: number;\n  units: string;\n  updatetime: string;\n  status: number;\n  call_key: string;\n  responders: number;\n  hours_spent: number;\n  callout_type_desc: string;\n  callout_address_origin: string;\n  callout_address_dest: string;\n  callout_status_desc: string;\n}\n\n@Injectable()\nexport class MenuCalloutHistoryService {\n\n  constructor(private http: HttpClient, private location: Location,\n              private authService: AuthService) {\n  }\n\n  getCalloutHistory(sort: string, order: string, page: number): Observable<CalloutHistoryItem[]> {\n    const fhid = this.authService.getFirehallId();\n    const href = this.location.prepareExternalUrl('../angular-services/menu-callout-history-service.php');\n    const requestUrl = `${href}/history?fhid=${fhid}`;\n    return this.http.get<CalloutHistoryItem[]>(requestUrl);\n  }\n}\n"],"sourceRoot":""}